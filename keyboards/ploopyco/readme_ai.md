# QMK Programming Guide for the Ploopy Classic 2 Trackball

## Introduction
This guide walks through every step of programming your Ploopy Classic 2 trackball’s QMK firmware, from environment setup to creating and flashing a beginner‐friendly custom keymap. No prior QMK or command‐line experience is required.

## 1. Install and Configure the QMK Build Environment
Before writing any code, install the QMK CLI and toolchain:
1. Install Python 3 and pip.
2. Open a terminal and run:
   ```bash
   python3 -m pip install --user qmk
   ```
3. Verify installation:
   ```bash
   qmk --version
   ```
4. Clone the QMK firmware repository and install dependencies:
   ```bash
   qmk setup
   ```
   - Accept all prompts by typing **y** when asked.
   - This creates a `qmk_firmware` folder in your home directory[1].

## 2. Clone the Ploopy Classic 2 Keyboard Files
1. Change into your QMK directory:
   ```bash
   cd ~/qmk_firmware
   ```
2. Add the Ploopy Classic 2 trackball files as a keyboard:
   ```bash
   git remote add ploopy https://github.com/ploopyco/classic-2-trackball.git
   git fetch ploopy
   ```
3. Confirm the keyboard folder exists at `keyboards/ploopyco/classic-2-trackball`.

## 3. Build and Flash the Stock Firmware
### Enter Bootloader Mode
- Right-handed devices: Hold the **back** button while plugging in.
- Left-handed devices: Hold the **forward** button while plugging in.
When successful, the trackball appears in bootloader (mass-storage) mode and the cursor will not move[2].

### Build and Flash
In your QMK directory:
```bash
qmk compile -kb ploopyco/trackball/rev1_007 -km default
qmk flash   -kb ploopyco/trackball/rev1_007 -km default
```
- The **compile** step generates the firmware binary.
- The **flash** step writes it directly to the trackball’s UF2 bootloader[2].

## 4. Create a Beginner‐Friendly Custom Keymap
### 4.1 Create a New Keymap Folder
1. In `keyboards/ploopyco/classic-2-trackball/keymaps/`, create a folder named `my_first_keymap`.
2. Copy the default keymap files into it:
   ```bash
   cp -r keyboards/ploopyco/classic-2-trackball/keymaps/default \
         keyboards/ploopyco/classic-2-trackball/keymaps/my_first_keymap
   ```

### 4.2 Enable Pointing Device in `rules.mk`
Edit `keyboards/ploopyco/classic-2-trackball/rules.mk` and add:
```makefile
POINTING_DEVICE_ENABLE = yes
POINTING_DEVICE_DRIVER = pmw3360
```
This turns on the PMW3360 trackball sensor driver in QMK[3].

### 4.3 Configure Sensor Settings in `config.h`
In `keymaps/my_first_keymap/config.h`, define default CPI (DPI) values:
```c
#define PMW3360_CPI 1200
#define POINTING_DEVICE_REVERSE_X
#define POINTING_DEVICE_REVERSE_Y
```
- `PMW3360_CPI` sets the initial sensitivity in counts per inch.
- Reverse flags invert axes as needed.

### 4.4 Define Your Layout in `keymap.c`
Open `keymaps/my_first_keymap/keymap.c` and customize the button assignments:
```c
#include QMK_KEYBOARD_H

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [0] = LAYOUT_ploopy(
    KC_BTN1, KC_BTN2, KC_BTN3, KC_BTN4, KC_BTN5,  // Buttons 1–5
    KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS, KC_TRNS   // No keyboard matrix
  )
};

void pointing_device_init_kb(void) {
    pointing_device_set_cpi(PMW3360_CPI);
}
```
- `KC_BTN1`–`KC_BTN5` map your five buttons.
- `LAYOUT_ploopy` matches the Classic 2’s physical button order.
- The `pointing_device_init_kb` function applies your CPI setting at startup.

## 5. Compile and Flash Your Custom Keymap
1. Rebuild using your new keymap:
   ```bash
   qmk compile -kb ploopyco/classic-2-trackball/rev1_007 -km my_first_keymap
   ```
2. Enter bootloader mode again (see Step 3).
3. Flash your custom firmware:
   ```bash
   qmk flash -kb ploopyco/classic-2-trackball/rev1_007 -km my_first_keymap
   ```

## 6. Optional: Use QMK Toolbox for Flashing
1. Download and install [QMK Toolbox](https://github.com/qmk/qmk_toolbox) on Windows or macOS.
2. Open QMK Toolbox, load your `.uf2` file generated by `qmk compile`.
3. With the trackball in bootloader mode, click **Flash**. QMK Toolbox handles MCU selection and flashing automatically[4].

## 7. Next Steps and Troubleshooting
- To add custom layers, macros, or tap-dance features, refer to the QMK tutorial: https://docs.qmk.fm/newbs[5].
- If pointing device movement is choppy, experiment with different CPI values or adjust `PMW3360_LIFTOFF_DISTANCE` in `config.h`[6][7].
- For VIA support, compile with `-km via` to enable on-the-fly remapping via the VIA app.

This guide equips even first-time users to tailor their Ploopy Classic 2 trackball with QMK’s powerful customization. Happy customizing!

[1] https://docs.qmk.fm/newbs_getting_started
[2] https://github.com/ploopyco/classic-trackball/wiki/Appendix-C:-QMK-Firmware-Programming
[3] https://docs.qmk.fm/features/pointing_device
[4] https://www.keychron.com/pages/firmware-and-json-files-of-the-keychron-qmk-k-pro-and-k-max-series-keyboards
[5] https://docs.qmk.fm
[6] https://github.com/siderakb/pmw3360-pcb/blob/main/README.md
[7] https://docs.qmk.fm/ChangeLog/20210828
[8] https://www.youtube.com/watch?v=fuBJbdCFF0Q
[9] https://www.reddit.com/r/ErgoMechKeyboards/comments/qym71g/good_qmk_tutorial_ressource/
[10] https://www.youtube.com/watch?v=1bRqxVm_wvo
[11] https://docs.qmk.fm/features/mouse_keys
[12] https://ploopy.co/shop/nano-trackball-fully-assembled/
[13] https://www.youtube.com/playlist?list=PLZlceRZZjRugJFL-vnenYnDrbMc6wu_e_
[14] https://www.reddit.com/r/ErgoMechKeyboards/comments/1bds628/qmk_pointing_device_cpi_how_does_it_work/
[15] https://ryanis.cool/cosmos/docs/qmk-rp2040/
[16] https://docs.qmk.fm/ChangeLog/20220226
[17] https://www.reddit.com/r/ErgoMechKeyboards/comments/td28lh/pmw3360_support_in_qmk/
[18] https://firefly.3ric.ca/windeddragon/vial-qmk/-/blob/rp2040/docs/feature_pointing_device.md
[19] https://www.youtube.com/watch?v=TWEF2jkXgzo
[20] https://hackaday.io/project/190869/log/218889-make-it-wireless
[21] https://www.reddit.com/r/ploopy/comments/q3aene/looking_for_some_help_with_my_new_mini_trackballs/
[22] https://docs.qmk.fm/config_options
[23] https://forum.trackballs.eu/viewtopic.php?t=133
[24] https://www.reddit.com/r/ploopy/comments/see7rx/guide_flashing_qmk_firmware_with_lower_dpi/
[25] https://github.com/ploopyco/classic-trackball
[26] https://github.com/ploopyco/classic-2-trackball
[27] https://github.com/nicknimchuk/qmk_nano_dualhand
[28] https://github.com/qmk/qmk_firmware/issues/17585
[29] https://github.com/qmk/qmk_toolbox
[30] https://www.youtube.com/watch?v=oqITxaj0HTU
[31] https://www.reddit.com/r/olkb/comments/c0gz1f/are_these_the_correct_steps_to_get_started_with/
[32] https://github.com/qmk/qmk_toolbox/releases
[33] https://www.gloriousgaming.com/blogs/guides-resources/gmmk-2-qmk-installation-guide
[34] https://sourceforge.net/projects/qmk-toolbox.mirror/
[35] https://www.x-bows.com/blogs/blog/keyboard-qmk-firmware
[36] https://github.com/ploopyco/classic-trackball/wiki/Appendix-D:-Programming-QMK-on-Older-Ploopy-Devices
[37] https://ploopyco.github.io/trackpad/appendices/programming/
[38] https://ploopyco.github.io/knob/appendices/programming/
[39] https://www.reddit.com/r/ploopy/comments/sf9pwd/wheres_all_the_ploopyspecific_qmk_firmware/
[40] https://ploopy.co/shop/classic-2-trackball-fully-assembled/
[41] https://ploopy.co/classic-2-trackball/
[42] https://www.reddit.com/r/ploopy/
[43] https://ploopy.co
[44] https://wiki.makerdiary.com/nrf52840-connectkit/programming/uf2boot/
[45] https://www.theverge.com/news/637794/ploopyploopy-classic-2-trackball-open-source-upgrade
[46] https://learn.adafruit.com/adafruit-feather-m0-express-designed-for-circuit-python-circuitpython/uf2-bootloader-details
[47] https://learn.sparkfun.com/tutorials/sparkfun-qwiic-micro-samd21e-hookup-guide/uf2-bootloader-and-drivers
[48] https://github.com/ploopyco/classic-trackball/wiki/Ploopy-Trackball-Kit-Assembly,-Revision-D
[49] https://www.reddit.com/r/embedded/comments/1h6pwr7/is_it_possible_to_open_the_flash_drive_of_a/
[50] https://www.youtube.com/watch?v=C0TIQlsfT2k
[51] https://learn.adafruit.com/using-qmk-on-rp2040-microcontrollers/overview
[52] https://www.reddit.com/r/olkb/comments/10baza0/hex_to_uf2_for_rp2040/
[53] https://cdn-learn.adafruit.com/downloads/pdf/using-qmk-on-rp2040-microcontrollers.pdf
[54] https://github.com/mechboardsguides/flashing-rp2040-promicro
[55] https://docs.qmk.fm/platformdev_rp2040
[56] https://www.vikasraj.dev/blog/qmk-pi-pico-rp2040
[57] https://docs.qmk.fm/features/split_keyboard
[58] https://github.com/qmk/qmk_firmware/blob/master/docs/flashing.md
[59] https://www.reddit.com/r/ploopy/comments/193wq1a/qmk_firmware_flash_on_r1004_pcb_classic_trackball/
[60] https://docs.qmk.fm/newbs
[61] https://ploopy.co/shop/mini-trackball-assembled/
[62] https://www.reddit.com/r/Trackballs/wiki/index/
[63] https://docs.qmk.fm/flashing
[64] https://docs.qmk.fm/ChangeLog/20250223
[65] https://www.reddit.com/r/Trackballs/comments/qzuqqz/any_trackballs_with_onboard_memory/?tl=fil
[66] https://deskthority.net/viewtopic.php?t=28180
[67] https://ploopy.co/shop/knob/
[68] https://ploopy.co/shop/trackpad-fully-assembled/
[69] https://ploopy.co/shop/trackpad-full-kit/
[70] https://ploopy.co/shop/adept-trackball-full-kit/
[71] https://ploopy.co/shop/mouse/
[72] https://ploopy.co/shop/thumb-trackball-fully-assembled/
[73] https://ploopy.co/shop/nano-trackball-kit/
[74] https://gloriousforum.com/t/qmk-install-keymap-guide-for-gmmk-2-compact-on-ubuntu-distros/14529
[75] https://ploopy.co/classic-trackball/
[76] https://community.frame.work/t/custom-qmk-firmware/46459?page=2
[77] https://www.reddit.com/r/olkb/comments/16f9ypf/qmk_wont_compile_any_boards/
[78] https://docs.qmk.fm/faq_misc
[79] https://stackoverflow.com/questions/70160480/compiling-my-custom-keymap-using-qmk-msys-returns-a-multiple-target-patterns-err
[80] https://github.com/ElectronicCats/uf2-samd21
[81] https://piconomix.com/px-fwlib/_h_e_r_o__b_o_a_r_d__b_o_o_t_l_o_a_d_e_r__u_s_b__u_f2.html
[82] https://wiki.makerdiary.com/imxrt1011-nanokit/programming/uf2boot/
[83] https://github.com/microsoft/uf2
[84] https://esp32s3.com/install_uf2.html
[85] https://learn.adafruit.com/adafruit-feather-m0-express-designed-for-circuit-python-circuitpython/downloading-and-flashing
[86] https://forums.raspberrypi.com/viewtopic.php?t=364949
[87] https://www.reddit.com/r/RISCV/comments/1cb8m78/i_wrote_a_uf2_bootloader_for_the_wch_ch32v/
[88] https://github.com/ploopyco/classic-2-trackball/blob/master/ploopyco_trackball_rev1_007_via.uf2
[89] https://caniusevia.com/docs/download_firmware/
[90] https://geekhack.org/index.php?topic=106831.0
[91] https://news.ycombinator.com/item?id=43522060
[92] https://www.chriswlucas.com/posts/in-search-of-hyperscrolling/
[93] https://enochchau.com/blog/2022/ploopy-classic-build/
[94] https://ploopy.co/shop/classic-2-trackball-full-kit/
[95] https://github.com/ploopyco/classic-trackball/wiki/1.-Introduction
[96] https://github.com/ploopyco/classic-trackball/wiki/Appendix-C:-Firmware-programming
[97] https://www.youtube.com/watch?v=-oiuz6P9s8U
[98] https://www.reddit.com/r/Trackballs/comments/mavf6q/guide_on_how_to_build_ploopy_classic_trackball/
[99] https://www.codershaven.com/posts/building-a-ploopy-classic-trackball/
[100] https://deskthority.net/viewtopic.php?t=28419
[101] https://www.etsy.com/listing/1776914471/qmk-compatible-trackball-mouse-sensor
[102] https://groups.google.com/a/arduino.cc/g/developers/c/arldNYNsFqU/m/TnBMzLviEAAJ